# Railway éƒ¨ç½²æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†åç«¯ API éƒ¨ç½²åˆ° Railway å¹³å°ã€‚Railway æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„äº‘å¹³å°ï¼Œæ”¯æŒä» GitHub ä»“åº“ç›´æ¥éƒ¨ç½²åº”ç”¨ã€‚

## å‰ææ¡ä»¶

- âœ… GitHub ä»“åº“å·²åˆ›å»ºå¹¶æ¨é€ä»£ç 
- âœ… åç«¯ä»£ç å·²å‡†å¤‡å°±ç»ª
- âœ… Railway é…ç½®æ–‡ä»¶å·²åˆ›å»º
- ğŸ“§ Railway è´¦æˆ·ï¼ˆå…è´¹æ³¨å†Œï¼‰

## éƒ¨ç½²æ­¥éª¤

### 1. æ³¨å†Œ Railway è´¦æˆ·

1. è®¿é—® [Railway.app](https://railway.app)
2. ç‚¹å‡» "Start a New Project"
3. ä½¿ç”¨ GitHub è´¦æˆ·ç™»å½•
4. æˆæƒ Railway è®¿é—®æ‚¨çš„ GitHub ä»“åº“

### 2. åˆ›å»ºæ–°é¡¹ç›®

1. åœ¨ Railway æ§åˆ¶å°ä¸­ï¼Œç‚¹å‡» "New Project"
2. é€‰æ‹© "Deploy from GitHub repo"
3. é€‰æ‹©æ‚¨çš„ä»“åº“ï¼š`trae-accounting`
4. Railway ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°è¿™æ˜¯ä¸€ä¸ª Node.js é¡¹ç›®

### 3. é…ç½®éƒ¨ç½²è®¾ç½®

1. **é€‰æ‹©æ ¹ç›®å½•**ï¼š
   - ç‚¹å‡»é¡¹ç›®è®¾ç½®
   - åœ¨ "Root Directory" ä¸­è¾“å…¥ï¼š`backend`
   - è¿™å‘Šè¯‰ Railway ä» backend ç›®å½•éƒ¨ç½²

2. **æ„å»ºå‘½ä»¤**ï¼ˆé€šå¸¸è‡ªåŠ¨æ£€æµ‹ï¼‰ï¼š
   ```bash
   npm install && npm run build
   ```

3. **å¯åŠ¨å‘½ä»¤**ï¼ˆé€šå¸¸è‡ªåŠ¨æ£€æµ‹ï¼‰ï¼š
   ```bash
   npm start
   ```

### 4. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ Railway é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
NODE_ENV=production
PORT=3000
JWT_SECRET=your-super-secret-jwt-key-here
SUPABASE_URL=your-supabase-project-url
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
FRONTEND_URL=https://your-frontend-domain.vercel.app
```

**é‡è¦æç¤º**ï¼š
- å°† `your-super-secret-jwt-key-here` æ›¿æ¢ä¸ºå¼ºå¯†ç 
- ä» Supabase æ§åˆ¶å°è·å– URL å’Œå¯†é’¥
- ä½¿ç”¨æ‚¨çš„å‰ç«¯ Vercel åŸŸå

### 5. éƒ¨ç½²

1. é…ç½®å®Œæˆåï¼Œç‚¹å‡» "Deploy"
2. Railway å°†è‡ªåŠ¨ï¼š
   - å…‹éš†æ‚¨çš„ä»£ç 
   - å®‰è£…ä¾èµ–
   - æ„å»ºé¡¹ç›®
   - å¯åŠ¨æœåŠ¡

### 6. è·å–éƒ¨ç½² URL

éƒ¨ç½²æˆåŠŸåï¼š
1. åœ¨é¡¹ç›®æ¦‚è§ˆä¸­æ‰¾åˆ° "Domains" éƒ¨åˆ†
2. Railway ä¼šæä¾›ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„ URLï¼š
   ```
   https://your-app-name.up.railway.app
   ```
3. è®°å½•è¿™ä¸ª URLï¼Œç¨åéœ€è¦åœ¨å‰ç«¯é…ç½®ä¸­ä½¿ç”¨

## éªŒè¯éƒ¨ç½²

### æµ‹è¯• API ç«¯ç‚¹

ä½¿ç”¨æµè§ˆå™¨æˆ– Postman æµ‹è¯•ä»¥ä¸‹ç«¯ç‚¹ï¼š

```bash
# å¥åº·æ£€æŸ¥
GET https://your-app-name.up.railway.app/api/health

# é¢„æœŸå“åº”
{
  "status": "ok",
  "timestamp": "2024-01-20T10:30:00.000Z",
  "environment": "production"
}
```

### æµ‹è¯•è®¤è¯ç«¯ç‚¹

```bash
# æ³¨å†Œæµ‹è¯•
POST https://your-app-name.up.railway.app/api/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "testpassword123"
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **éƒ¨ç½²å¤±è´¥**
   - æ£€æŸ¥ Railway æ„å»ºæ—¥å¿—
   - ç¡®è®¤ `backend/package.json` ä¸­çš„è„šæœ¬æ­£ç¡®
   - éªŒè¯ Node.js ç‰ˆæœ¬å…¼å®¹æ€§

2. **ç¯å¢ƒå˜é‡é—®é¢˜**
   - ç¡®è®¤æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡å·²è®¾ç½®
   - æ£€æŸ¥ Supabase å¯†é’¥æ˜¯å¦æ­£ç¡®
   - éªŒè¯ JWT_SECRET å·²è®¾ç½®

3. **CORS é”™è¯¯**
   - ç¡®è®¤ FRONTEND_URL ç¯å¢ƒå˜é‡æ­£ç¡®
   - æ£€æŸ¥å‰ç«¯åŸŸåæ˜¯å¦åŒ¹é…

### æŸ¥çœ‹æ—¥å¿—

åœ¨ Railway æ§åˆ¶å°ä¸­ï¼š
1. ç‚¹å‡»æ‚¨çš„é¡¹ç›®
2. é€‰æ‹© "Deployments" æ ‡ç­¾
3. ç‚¹å‡»æœ€æ–°éƒ¨ç½²æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

## ä¸‹ä¸€æ­¥

éƒ¨ç½²æˆåŠŸåï¼š

1. **æ›´æ–°å‰ç«¯é…ç½®**ï¼š
   - ä¿®æ”¹å‰ç«¯çš„ API åŸºç¡€ URL
   - æŒ‡å‘æ–°çš„ Railway åŸŸå

2. **é…ç½® Supabase**ï¼š
   - åœ¨ Supabase é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ  Railway åŸŸååˆ°å…è®¸çš„æº

3. **æµ‹è¯•å®Œæ•´æµç¨‹**ï¼š
   - æ³¨å†Œæ–°ç”¨æˆ·
   - ç™»å½•éªŒè¯
   - æ•°æ®åŒæ­¥æµ‹è¯•

## è‡ªåŠ¨éƒ¨ç½²

Railway æ”¯æŒè‡ªåŠ¨éƒ¨ç½²ï¼š
- æ¯æ¬¡æ¨é€åˆ° `main` åˆ†æ”¯æ—¶è‡ªåŠ¨é‡æ–°éƒ¨ç½²
- æ— éœ€æ‰‹åŠ¨æ“ä½œ
- æ”¯æŒå›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬

## ç›‘æ§å’Œç»´æŠ¤

- Railway æä¾›å®æ—¶æ—¥å¿—ç›‘æ§
- æ”¯æŒè‡ªå®šä¹‰åŸŸå
- æä¾›ä½¿ç”¨é‡ç»Ÿè®¡
- æ”¯æŒç¯å¢ƒå˜é‡çƒ­æ›´æ–°

---

**éƒ¨ç½²å®Œæˆåï¼Œè¯·æŸ¥çœ‹ `POST_DEPLOY_CONFIG.md` äº†è§£åç»­é…ç½®æ­¥éª¤ã€‚**