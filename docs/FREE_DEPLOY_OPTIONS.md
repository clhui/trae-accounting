# å…è´¹åç«¯éƒ¨ç½²æ–¹æ¡ˆ

## æ¦‚è¿°

è€ƒè™‘åˆ° Railway çš„æ”¶è´¹é—®é¢˜ï¼Œè¿™é‡Œä¸ºæ‚¨æä¾›å‡ ä¸ªå…è´¹çš„åç«¯éƒ¨ç½²æ›¿ä»£æ–¹æ¡ˆã€‚æ¯ä¸ªå¹³å°éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„æ–¹æ¡ˆã€‚

## ğŸ†“ å…è´¹éƒ¨ç½²å¹³å°å¯¹æ¯”

### 1. Render.com (æ¨è)

**ä¼˜ç‚¹**ï¼š
- ğŸ†“ æä¾›å…è´¹å±‚çº§
- ğŸš€ æ”¯æŒ Node.js å’Œ TypeScript
- ğŸ“¦ ä» GitHub è‡ªåŠ¨éƒ¨ç½²
- ğŸ”„ è‡ªåŠ¨ SSL è¯ä¹¦
- ğŸ’¾ æ”¯æŒ PostgreSQL æ•°æ®åº“

**é™åˆ¶**ï¼š
- å…è´¹æœåŠ¡ä¼šåœ¨ä¸æ´»è·ƒæ—¶ä¼‘çœ 
- æ¯æœˆ 750 å°æ—¶å…è´¹ä½¿ç”¨æ—¶é—´
- æ„å»ºæ—¶é—´é™åˆ¶

**éƒ¨ç½²æ­¥éª¤**ï¼š
1. è®¿é—® [render.com](https://render.com)
2. è¿æ¥ GitHub è´¦æˆ·
3. é€‰æ‹©æ‚¨çš„ä»“åº“
4. è®¾ç½®æ„å»ºå‘½ä»¤ï¼š`cd backend && npm install && npm run build`
5. è®¾ç½®å¯åŠ¨å‘½ä»¤ï¼š`cd backend && npm start`
6. é…ç½®ç¯å¢ƒå˜é‡

### 2. Vercel (Serverless Functions)

**ä¼˜ç‚¹**ï¼š
- ğŸ†“ æ…·æ…¨çš„å…è´¹å±‚çº§
- âš¡ å…¨çƒ CDN åŠ é€Ÿ
- ğŸ”„ è‡ªåŠ¨éƒ¨ç½²
- ğŸ“± é€‚åˆ API è·¯ç”±

**é™åˆ¶**ï¼š
- ä¸»è¦é€‚åˆæ— æœåŠ¡å™¨å‡½æ•°
- æ‰§è¡Œæ—¶é—´é™åˆ¶ï¼ˆ10ç§’ï¼‰
- éœ€è¦é‡æ„ä¸º Serverless æ¶æ„

**é€‚ç”¨åœºæ™¯**ï¼š
- ç®€å•çš„ API ç«¯ç‚¹
- æ— çŠ¶æ€æœåŠ¡

### 3. Netlify Functions

**ä¼˜ç‚¹**ï¼š
- ğŸ†“ å…è´¹å±‚çº§
- ğŸ”§ æ˜“äºè®¾ç½®
- ğŸ“¦ ä¸å‰ç«¯éƒ¨ç½²é›†æˆ

**é™åˆ¶**ï¼š
- ä¸»è¦ç”¨äºæ— æœåŠ¡å™¨å‡½æ•°
- æ‰§è¡Œæ—¶é—´é™åˆ¶
- å†·å¯åŠ¨å»¶è¿Ÿ

### 4. Supabase Edge Functions

**ä¼˜ç‚¹**ï¼š
- ğŸ†“ ä¸ Supabase æ•°æ®åº“é›†æˆ
- âš¡ åŸºäº Deno è¿è¡Œæ—¶
- ğŸŒ å…¨çƒè¾¹ç¼˜è®¡ç®—

**é™åˆ¶**ï¼š
- éœ€è¦ä½¿ç”¨ Deno/TypeScript
- ç›¸å¯¹è¾ƒæ–°çš„å¹³å°
- å­¦ä¹ æ›²çº¿

### 5. Heroku (æœ‰é™å…è´¹)

**æ³¨æ„**ï¼šHeroku å·²å–æ¶ˆå…è´¹è®¡åˆ’ï¼Œä½†æä¾›å­¦ç”Ÿä¼˜æƒ å’Œä½æˆæœ¬é€‰é¡¹ã€‚

## ğŸ¯ æ¨èæ–¹æ¡ˆï¼šRender.com

åŸºäºæ‚¨å½“å‰çš„ Node.js + Express æ¶æ„ï¼Œ**Render.com** æ˜¯æœ€ä½³çš„å…è´¹æ›¿ä»£æ–¹æ¡ˆï¼š

### ä¸ºä»€ä¹ˆé€‰æ‹© Renderï¼Ÿ

1. **å®Œå…¨å…¼å®¹**ï¼šæ”¯æŒæ‚¨ç°æœ‰çš„ Node.js ä»£ç 
2. **ç®€å•è¿ç§»**ï¼šåªéœ€ä¿®æ”¹éƒ¨ç½²é…ç½®
3. **æ•°æ®åº“æ”¯æŒ**ï¼šæä¾›å…è´¹ PostgreSQL
4. **è‡ªåŠ¨éƒ¨ç½²**ï¼šGitHub é›†æˆ

### Render éƒ¨ç½²é…ç½®

æˆ‘å°†ä¸ºæ‚¨åˆ›å»º Render çš„é…ç½®æ–‡ä»¶ï¼š

```yaml
# render.yaml
services:
  - type: web
    name: jizhangben-backend
    env: node
    plan: free
    buildCommand: cd backend && npm install && npm run build
    startCommand: cd backend && npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
```

## ğŸ”„ è¿ç§»æ­¥éª¤

### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ Render.comï¼ˆæ¨èï¼‰

1. **æ³¨å†Œ Render è´¦æˆ·**
   - è®¿é—® [render.com](https://render.com)
   - ä½¿ç”¨ GitHub ç™»å½•

2. **åˆ›å»º Web Service**
   - é€‰æ‹© "New Web Service"
   - è¿æ¥æ‚¨çš„ GitHub ä»“åº“
   - é€‰æ‹© `trae-accounting` ä»“åº“

3. **é…ç½®éƒ¨ç½²è®¾ç½®**
   - **Name**: `jizhangben-backend`
   - **Root Directory**: `backend`
   - **Environment**: `Node`
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm start`

4. **è®¾ç½®ç¯å¢ƒå˜é‡**
   ```
   NODE_ENV=production
   PORT=10000
   JWT_SECRET=your-secret-key
   SUPABASE_URL=your-supabase-url
   SUPABASE_ANON_KEY=your-supabase-anon-key
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
   FRONTEND_URL=https://your-frontend-domain.vercel.app
   ```

5. **éƒ¨ç½²**
   - ç‚¹å‡» "Create Web Service"
   - Render å°†è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨ Vercel Functions

å¦‚æœé€‰æ‹© Vercelï¼Œéœ€è¦é‡æ„ä¸º Serverless æ¶æ„ï¼š

1. **åˆ›å»º API è·¯ç”±ç»“æ„**
   ```
   api/
   â”œâ”€â”€ auth/
   â”‚   â”œâ”€â”€ login.ts
   â”‚   â””â”€â”€ register.ts
   â”œâ”€â”€ records/
   â”‚   â”œâ”€â”€ index.ts
   â”‚   â””â”€â”€ [id].ts
   â””â”€â”€ categories/
       â””â”€â”€ index.ts
   ```

2. **ä¿®æ”¹ä»£ç ç»“æ„**
   - æ¯ä¸ªæ–‡ä»¶å¯¼å‡ºé»˜è®¤å‡½æ•°
   - ä½¿ç”¨ Vercel çš„è¯·æ±‚/å“åº”æ¨¡å¼

## ğŸ“‹ éƒ¨ç½²åéªŒè¯

æ— è®ºé€‰æ‹©å“ªä¸ªå¹³å°ï¼Œéƒ¨ç½²åéƒ½éœ€è¦ï¼š

1. **æµ‹è¯• API ç«¯ç‚¹**
   ```bash
   # å¥åº·æ£€æŸ¥
   GET https://your-app.onrender.com/api/health
   
   # ç”¨æˆ·æ³¨å†Œ
   POST https://your-app.onrender.com/api/auth/register
   ```

2. **æ›´æ–°å‰ç«¯é…ç½®**
   - ä¿®æ”¹å‰ç«¯çš„ API åŸºç¡€ URL
   - æŒ‡å‘æ–°çš„éƒ¨ç½²åŸŸå

3. **é…ç½® CORS**
   - ç¡®ä¿åç«¯å…è®¸å‰ç«¯åŸŸåè®¿é—®

## ğŸ’¡ å»ºè®®

1. **é¦–é€‰ Render.com**ï¼šæœ€æ¥è¿‘ Railway çš„ä½“éªŒ
2. **å¤‡é€‰ Vercel**ï¼šå¦‚æœæ„¿æ„é‡æ„ä¸º Serverless
3. **è€ƒè™‘ Supabase**ï¼šå¦‚æœæƒ³è¦å®Œå…¨æ‰˜ç®¡çš„åç«¯è§£å†³æ–¹æ¡ˆ

## ğŸ”§ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæ‚¨é€‰æ‹©äº†æŸä¸ªå¹³å°ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š
- åˆ›å»ºç›¸åº”çš„é…ç½®æ–‡ä»¶
- ä¿®æ”¹éƒ¨ç½²è„šæœ¬
- æ›´æ–°æ–‡æ¡£
- ååŠ©è¿ç§»è¿‡ç¨‹

è¯·å‘Šè¯‰æˆ‘æ‚¨å€¾å‘äºå“ªä¸ªæ–¹æ¡ˆï¼Œæˆ‘å°†ä¸ºæ‚¨æä¾›è¯¦ç»†çš„è¿ç§»æŒ‡å¯¼ï¼